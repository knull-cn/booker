这里是对已有代码进行整合.